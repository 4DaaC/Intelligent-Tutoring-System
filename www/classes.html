<!DOCTYPE html>
<html>
<head>
  
  <title>jQuery Mobile page</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="css/jquery.mobile-1.0.min.css" /> 
    <link rel="stylesheet" href="css/jquery-mobile-theme-ru.css" />
  <script src="js/jquery-1.7.min.js"></script>
  <script src="js/phonegap-1.2.0.js"></script>
  <script src="js/crypt.js"></script>
  <script>
  $(document).bind("mobileinit", function(){
    $.mobile.page.prototype.options.addBackBtn = true;
  });
  </script> 
  <script src="js/jquery.mobile-1.0.min.js"></script>
  <script src="js/its.js"></script>
</head>
<body>
  <div data-role="page" id="classes">
    <div data-role="header">
      <a data-rel="back" data-icon="arrow-l">Back </a>
      <h1>Available Quizzes</h1>  
    </div>
    <div data-role="content">
      <ul data-role="listview" id="class-list"></ul>
    </div>
  <script>
  
    $('#classes').bind('pageshow',function(){
      console.log('init');
      if (!loggedIn()){
        $('#class-list').html('<li>Login to View</li>');
      }else{
        var profs = getProfs();
        if(profs == null || profs.length < 1){
          $('#class-list').html('<li>No Classes Found</li>');
        }else{
          var markup = "";
          console.log(profs);
          for(idx in profs){
            console.log(idx);
            var profName = profs[idx].username;
            markup += "<li>" + profName + "<ul>";
            var classes = getClasses(profName);
            if(classes == null || classes.length < 1){
              markup += "<li>No Classes Found</li>";
            }else{
              for(idx2 in classes){
                var className = classes[idx2].name;
                markup +="<li>" + className + "<ul>";
                var quizzes = getQuizzes(classes[idx2].cid);
                if(quizzes == null || classes.length < 1){
                  markup += "<li>No Quizzes Found</li>";
                }else{
                  for(idx3 in quizzes){
                    var quizName = quizzes[idx3].name;
                    markup += "<li>" + quizName + '</li>';
                  }
                }
                markup += "</ul></li>";
              }
            }
            markup += "</ul></li>";
          }
          markup +="</li>";
        }
        $('#class-list').html(markup);
      }
      $("#class-list").listview("refresh");
    });
    
  </script>
  </div>
</body>
  
</html>